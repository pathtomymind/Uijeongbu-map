<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026-01-25 도로 기반 정비 최적화 경로</title>
    <meta property="og:title" content="2026-01-25 도로 기반 최적화 경로 안내">
    <meta property="og:description" content="의정부 실제 도로망을 반영한 효율적인 정비 동선 지도입니다.">
    <meta property="og:type" content="website">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
    
    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; }
        #map { height: 100vh; width: 100vw; }
        
        /* 우측 상단 경로 안내 패널 숨기기 */
        .leaflet-routing-container { display: none !important; }

        .custom-tooltip {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #764ba2;
            border-radius: 6px;
            font-weight: bold;
            padding: 4px 8px;
            color: #333;
            font-size: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>

<script>
    // 추출된 POI 좌표 데이터
    const points = [
        {lat: 37.7501, lng: 127.0331, name: "1. 의정부시청 (출발)"},
        {lat: 37.7455, lng: 127.0495, name: "2. 태평로 132 (화순식당)"},
        {lat: 37.7512, lng: 127.0985, name: "3. 민락로 279 (민락동 910)"},
        {lat: 37.7385, lng: 127.1082, name: "4. 고산동 874 (휴스토리)"},
        {lat: 37.7325, lng: 127.1125, name: "5. 수암로 25 (산곡동 730)"},
        {lat: 37.7285, lng: 127.1085, name: "6. 산곡동 810 삼거리"},
        {lat: 37.7585, lng: 127.0425, name: "7. 가능동 205-1 (동진종합상사)"},
        {lat: 37.7665, lng: 127.0385, name: "8. 가금교 삼거리 (녹양동)"},
        {lat: 37.7542, lng: 127.0371, name: "9. 가능동 663-9 (백정밥상)"},
        {lat: 37.7538, lng: 127.0365, name: "10. 가능동 663-21 (세븐일레븐)"},
        {lat: 37.7501, lng: 127.0331, name: "11. 의정부시청 (복귀)"}
    ];

    const map = L.map('map', { zoomControl: false }).setView([37.745, 127.07], 13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    // 마커 및 상시 툴팁 생성
    points.forEach((pt, index) => {
        let color = "#4A90E2";
        if (index === 0) color = "#28a745";
        if (index === points.length - 1) color = "#fd7e14";

        const marker = L.circleMarker([pt.lat, pt.lng], {
            radius: 8,
            fillColor: color,
            color: "#fff",
            weight: 2,
            fillOpacity: 1
        }).addTo(map);

        marker.bindTooltip(pt.name, {
            permanent: true,
            direction: 'top',
            offset: [0, -10],
            className: 'custom-tooltip'
        });
    });

    // 1. 정비 구간 (1번 ~ 10번): 파란색 실선 도로망
    L.Routing.control({
        waypoints: points.slice(0, 10).map(p => L.latLng(p.lat, p.lng)),
        lineOptions: {
            styles: [{ color: '#007bff', opacity: 0.8, weight: 6 }]
        },
        createMarker: function() { return null; }, // 마커 중복 방지
        addWaypoints: false,
        routeWhileDragging: false,
        draggableWaypoints: false,
        fitSelectedRoutes: true
    }).addTo(map);

    // 2. 복귀 구간 (10번 ~ 11번): 빨간색 점선 도로망
    L.Routing.control({
        waypoints: [
            L.latLng(points[9].lat, points[9].lng),
            L.latLng(points[10].lat, points[10].lng)
        ],
        lineOptions: {
            styles: [{ color: '#dc3545', opacity: 0.7, weight: 6, dashArray: '10, 10' }]
        },
        createMarker: function() { return null; },
        addWaypoints: false,
        routeWhileDragging: false,
        draggableWaypoints: false
    }).addTo(map);

</script>

</body>
</html>
