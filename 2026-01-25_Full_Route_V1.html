<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026-01-25 불법옥외광고물 정비 최적화 경로</title>
    <meta property="og:title" content="2026-01-25 정비 최적화 경로 안내">
    <meta property="og:description" content="의정부 전역 민원 처리를 위한 효율적인 동선 시각화 지도입니다.">
    <meta property="og:type" content="website">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; }
        #map { height: 100vh; width: 100vw; }
        .custom-tooltip {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #764ba2;
            border-radius: 4px;
            font-weight: bold;
            padding: 2px 6px;
            color: #333;
            font-size: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // 추출된 데이터를 바탕으로 한 정밀 POI 좌표 리스트
    const points = [
        [37.7501, 127.0331, "1. 의정부시청 (출발)"],
        [37.7455, 127.0495, "2. 태평로 132 (화순식당)"],
        [37.7512, 127.0985, "3. 민락로 279 (민락동 910)"],
        [37.7385, 127.1082, "4. 고산동 874 (휴스토리)"],
        [37.7325, 127.1125, "5. 수암로 25 (산곡동 730)"],
        [37.7285, 127.1085, "6. 산곡동 810 삼거리"],
        [37.7585, 127.0425, "7. 가능동 205-1 (동진종합상사)"],
        [37.7665, 127.0385, "8. 가금교 삼거리 (녹양동)"],
        [37.7542, 127.0371, "9. 가능동 663-9 (백정밥상)"],
        [37.7538, 127.0365, "10. 가능동 663-21 (세븐일레븐)"],
        [37.7501, 127.0331, "11. 의정부시청 (복귀)"]
    ];

    // 지도 초기화 (의정부 중심부)
    const map = L.map('map', { zoomControl: false }).setView([37.745, 127.07], 13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // 지점 마커 및 상시 말풍선 설정
    points.forEach((pt, index) => {
        let markerColor = "#007bff"; // 기본 파란색
        if (index === 0) markerColor = "#28a745"; // 출발 녹색
        if (index === points.length - 1) markerColor = "#fd7e14"; // 복귀 주황색

        const marker = L.circleMarker([pt[0], pt[1]], {
            radius: 7,
            fillColor: markerColor,
            color: "#fff",
            weight: 2,
            opacity: 1,
            fillOpacity: 0.9
        }).addTo(map);

        // 클릭 없이도 항상 보이는 툴팁 설정
        marker.bindTooltip(pt[2], {
            permanent: true,
            direction: 'right',
            offset: [12, 0],
            className: 'custom-tooltip'
        });
    });

    // 1. 전체 이동 경로 (파란색 실선: 1번 지점 ~ 마지막 정비 지점)
    const mainPathCoords = points.slice(0, 10).map(p => [p[0], p[1]]);
    L.polyline(mainPathCoords, {
        color: '#007bff',
        weight: 5,
        opacity: 0.7,
        lineJoin: 'round'
    }).addTo(map);

    // 2. 복귀 경로 (빨간색 점선: 10번 지점 ~ 11번 지점)
    const returnPathCoords = [
        [points[9][0], points[9][1]],
        [points[10][0], points[10][1]]
    ];
    L.polyline(returnPathCoords, {
        color: '#dc3545',
        weight: 5,
        opacity: 0.7,
        dashArray: '10, 10',
        lineJoin: 'round'
    }).addTo(map);

    // 모든 지점이 화면에 들어오도록 자동 줌 조절
    const bounds = L.latLngBounds(points.map(p => [p[0], p[1]]));
    map.fitBounds(bounds, { padding: [80, 80] });
</script>

</body>
</html>
